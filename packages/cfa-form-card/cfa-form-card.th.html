<main th:fragment="formCard(modifier, id, form, graphic, header, formGroups, fieldset, footer)" th:classappend="${modifier}" th:attr="id=${id}">
  <form class="usa-form" th:classappend="${form.modifier}">
    <svg th:if="${graphic}" class="cfa-form-card__graphic usa-icon" aria-hidden="true" focusable="false" role="img">
      <use th:href="${graphic.href}"></use>
    </svg>

    <header th:if="${header}" class="cfa-form-card__header" th:classappend="${header.modifier}">
      <div th:if="${header.headingText}" class="cfa-form-card__header-heading">
        <h1 th:attr="id=${header.headingId}" th:text="${header.headingText}">Heading</h1>
      </div>

      <div th:if="${header.heading}" class="cfa-form-card__header-heading" th:utext="${header.heading}">
        <h1>Heading</h1>
      </div>

      <div th:if="${header.helpMessageText}" class="cfa-form-card__header-help-message">
        <p th:text="${header.helpMessageText}">Help message.</p>
      </div>

      <div th:if="${header.helpMessage}" class="cfa-form-card__header-help-message" th:utext="${header.helpMessage}">
        <p>Help message.</p>
      </div>

      <div th:if="${header.alert}">
        <th:block th:replace="~{packages/cfa-alert/cfa-alert.th :: alert(${header.alert.modifier}, ${header.alert.role}, ${header.alert.heading}, ${header.alert.label}, ${header.alert.labelledBy}, ${header.alert.body}, ${header.alert.text})}"></th:block>
      </div>
    </header>

    <div class="cfa-form-card__contents">
      <div th:each="formGroup: ${formGroups}">
        <div th:if="${formGroup.input}">
          <div th:unless="${formGroup.inputGroup}">
            <th:block th:replace="~{packages/cfa-form-group/cfa-form-group.th :: formGroup(${formGroup.modifier}, ${formGroup.id}, ${formGroup.label}, ${formGroup.hint}, ${formGroup.error}, ${formGroup.input}, '', '', '')}" />
          </div>

          <div th:if="${formGroup.inputGroup}">
            <th:block th:replace="~{packages/cfa-form-group/cfa-form-group.th :: formGroup(${formGroup.modifier}, ${formGroup.id}, ${formGroup.label}, ${formGroup.hint}, ${formGroup.error}, ${formGroup.input}, ${formGroup.inputGroup}, '', '')}" />
          </div>
        </div>

        <div th:if="${formGroup.textarea}">
          <th:block th:replace="~{packages/cfa-form-group/cfa-form-group.th :: formGroup(${formGroup.modifier}, ${formGroup.id}, ${formGroup.label}, ${formGroup.hint}, ${formGroup.error}, '', '', ${formGroup.textarea}, '')}" />
        </div>

        <div th:if="${formGroup.selectEl}">
          <th:block th:replace="~{packages/cfa-form-group/cfa-form-group.th :: formGroup(${formGroup.modifier}, ${formGroup.id}, ${formGroup.label}, ${formGroup.hint}, ${formGroup.error}, '', '', '', ${formGroup.selectEl})}" />
        </div>

        <div th:if="${formGroup.memorableDate}">
          <th:block th:replace="~{packages/cfa-memorable-date/cfa-memorable-date.th :: memorableDate(${formGroup.modifier}, ${formGroup.id}, ${formGroup.fieldset}, ${formGroup.hint}, ${formGroup.required}, ${formGroup.error}, ${formGroup.month},  ${formGroup.day},  ${formGroup.year})}" />
        </div>

        <div th:if="${formGroup.options}">
          <th:block th:replace="~{packages/cfa-fieldset/cfa-fieldset.th :: fieldset(${formGroup.modifier}, ${formGroup.id}, ${formGroup.legend}, ${formGroup.hint}, ${formGroup.required}, ${formGroup.error}, ${formGroup.options})}" />
        </div>
      </div>
    </div>

    <div th:if="${footer}" class="cfa-form-card__footer">
      <div th:if="${footer.submit}">
        <th:block th:replace="~{packages/cfa-button/cfa-button.th :: button(${footer.submit})}" />
      </div>

      <div th:if="${footer.skip}">
        <th:block th:replace="~{packages/cfa-button/cfa-button.th :: button(${footer.skip})}" />
      </div>

      <div th:if="${footer.group}">
        <th:block th:replace="~{packages/cfa-button/cfa-button.th :: button(${footer.group})}" />
      </div>

      <div th:if="${footer.subtleText}" th:utext="${footer.subtleText}">
        <p>Subltle text.</p>
      </div>
    </div>
  </form>
</main>